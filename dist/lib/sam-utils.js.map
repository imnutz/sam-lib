{"version":3,"sources":["../../lib/sam-utils.js"],"names":["O","val","value","A","Array","isArray","S","N","isNaN","NZ","F","f","f0","e","map","reduce","and","undefined","i","element","includes","E","oneOf","mon","on","triggered","first","arr","or","acc","current","match","conditions","values","condition","index","filter","step"],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA,IAAMA,CAAC,GAAG,SAAJA,CAAI,CAACC,GAAD;AAAA,MAAMC,KAAN,uEAAc,EAAd;AAAA,SAAqBD,GAAG,IAAK,yBAAOA,GAAP,MAAe,QAAvB,GAAmCA,GAAnC,GAAyCC,KAA9D;AAAA,CAAV;;;;AACA,IAAMC,CAAC,GAAG,SAAJA,CAAI,CAACF,GAAD;AAAA,MAAMC,KAAN,uEAAc,EAAd;AAAA,SAAqBD,GAAG,IAAIG,KAAK,CAACC,OAAN,CAAcJ,GAAd,CAAP,GAA4BA,GAA5B,GAAkCC,KAAvD;AAAA,CAAV;;;;AACA,IAAMI,CAAC,GAAG,SAAJA,CAAI,CAACL,GAAD;AAAA,MAAMC,KAAN,uEAAc,EAAd;AAAA,SAAqBD,GAAG,IAAK,OAAOA,GAAP,KAAe,QAAvB,GAAmCA,GAAnC,GAAyCC,KAA9D;AAAA,CAAV;;;;AACA,IAAMK,CAAC,GAAG,SAAJA,CAAI,CAACN,GAAD;AAAA,MAAMC,KAAN,uEAAc,CAAd;AAAA,SAAoBM,KAAK,CAACP,GAAD,CAAL,GAAaC,KAAb,GAAqBD,GAAzC;AAAA,CAAV;;;;AACA,IAAMQ,EAAE,GAAG,SAALA,EAAK,CAACR,GAAD;AAAA,MAAMC,KAAN,uEAAc,CAAd;AAAA,SAAoBD,GAAG,KAAK,CAAR,IAAaO,KAAK,CAACP,GAAD,CAAlB,GAA0BC,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkBA,KAA5C,GAAoDD,GAAxE;AAAA,CAAX;;;;AACA,IAAMS,CAAC,GAAG,SAAJA,CAAI,CAACC,CAAD;AAAA,MAAIC,EAAJ,uEAAS;AAAA,WAAM,IAAN;AAAA,GAAT;AAAA,SAAwBD,CAAC,GAAGA,CAAH,GAAOC,EAAhC;AAAA,CAAV,C,CAEA;;;;;AACA,IAAMC,CAAC,GAAG,SAAJA,CAAI,CAAAX,KAAK;AAAA,SAAIE,KAAK,CAACC,OAAN,CAAcH,KAAd,IACbA,KAAK,CAACY,GAAN,CAAUD,CAAV,EAAaE,MAAb,CAAoBC,GAApB,CADa,GAEbd,KAAK,KAAK,IAAV,IAAmBA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKe,SAFtC;AAAA,CAAf;;AAIA,IAAMC,CAAC,GAAG,SAAJA,CAAI,CAAChB,KAAD,EAAQiB,OAAR,EAAoB;AAC1B,mCAAcjB,KAAd;AACI,SAAK,QAAL;AAAe,aAAO,OAAOiB,OAAP,KAAmB,QAAnB,IAA+BjB,KAAK,CAACkB,QAAN,CAAeD,OAAf,CAAtC;;AACf,SAAK,QAAL;AAAe,aAAOf,KAAK,CAACC,OAAN,CAAcH,KAAd,IAChBA,KAAK,CAACkB,QAAN,CAAeD,OAAf,CADgB,GAEhB,OAAOA,OAAP,KAAmB,QAAnB,IAA+BN,CAAC,CAACX,KAAK,CAACiB,OAAD,CAAN,CAFvB;AAFnB;;AAMA,SAAOjB,KAAK,KAAKiB,OAAjB;AACH,CARD;;AAUA,IAAME,CAAC,GAAG,SAAJA,CAAI,CAACnB,KAAD,EAAQiB,OAAR;AAAA,SACNN,CAAC,CAACX,KAAD,CAAD,IAAYW,CAAC,CAACM,OAAD,CAAb,GACED,CAAC,CAAChB,KAAD,EAAOiB,OAAP,CADH,GAEEN,CAAC,CAACX,KAAD,CAHG;AAAA,CAAV;;;;AAKA,IAAMoB,KAAK,GAAG,SAARA,KAAQ,CAACpB,KAAD,EAAQS,CAAR,EAAc;AACxBE,EAAAA,CAAC,CAACX,KAAD,CAAD,IAAYS,CAAC,CAACT,KAAD,CAAb;AACA,SAAOqB,GAAG,CAACV,CAAC,CAACX,KAAD,CAAF,CAAV;AACH,CAHD;;;;AAKA,IAAMsB,EAAE,GAAG,SAALA,EAAK,CAACtB,KAAD,EAAQS,CAAR,EAAc;AACrBE,EAAAA,CAAC,CAACX,KAAD,CAAD,IAAYS,CAAC,CAACT,KAAD,CAAb;AACA,SAAO;AAAEsB,IAAAA,EAAE,EAAFA;AAAF,GAAP;AACH,CAHD;;;;AAKA,IAAMD,GAAG,GAAG,SAANA,GAAM;AAAA,MAACE,SAAD,uEAAa,IAAb;AAAA,SAAuB;AAC/BH,IAAAA,KAAK,EAAEG,SAAS,GAAG,UAACvB,KAAD,EAAQS,CAAR;AAAA,aAAcY,GAAG,EAAjB;AAAA,KAAH,GAAyBD;AADV,GAAvB;AAAA,CAAZ;;AAIA,IAAMI,KAAK,GAAG,SAARA,KAAQ;AAAA,MAACC,GAAD,uEAAO,EAAP;AAAA,SAAcA,GAAG,CAAC,CAAD,CAAjB;AAAA,CAAd;;;;AACA,IAAMC,EAAE,GAAG,SAALA,EAAK,CAACC,GAAD,EAAMC,OAAN;AAAA,SAAkBD,GAAG,IAAIC,OAAzB;AAAA,CAAX;;;;AACA,IAAMd,GAAG,GAAG,SAANA,GAAM,CAACa,GAAD,EAAMC,OAAN;AAAA,SAAkBD,GAAG,IAAIC,OAAzB;AAAA,CAAZ;;;;AACA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,UAAD,EAAaC,MAAb;AAAA,SAAwBP,KAAK,CAACM,UAAU,CAAClB,GAAX,CAAe,UAACoB,SAAD,EAAYC,KAAZ;AAAA,WAAsBD,SAAS,GAAGD,MAAM,CAACE,KAAD,CAAT,GAAmB,IAAlD;AAAA,GAAf,EAAuEC,MAAvE,CAA8EvB,CAA9E,CAAD,CAA7B;AAAA,CAAd;;;;AACA,IAAMwB,IAAI,GAAG,SAAPA,IAAO;AAAA,SAAO,EAAP;AAAA,CAAb","sourcesContent":["// ISC License (ISC)\r\n// Copyright 2019 Jean-Jacques Dubray\r\n\r\n// Permission to use, copy, modify, and/or distribute this software for any purpose \r\n// with or without fee is hereby granted, provided that the above copyright notice \r\n// and this permission notice appear in all copies.\r\n\r\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH \r\n// REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND \r\n// FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, \r\n// OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA \r\n// OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, \r\n// ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n\r\n\r\n// Optional chaining implementation\r\nconst O = (val, value = {}) => val && (typeof val === 'object') ? val : value\r\nconst A = (val, value = []) => val && Array.isArray(val) ? val : value\r\nconst S = (val, value = '') => val && (typeof val === 'string') ? val : value\r\nconst N = (val, value = 0) => isNaN(val) ? value : val\r\nconst NZ = (val, value = 1) => val === 0 || isNaN(val) ? value === 0 ? 1 : value : val\r\nconst F = (f, f0 = () => null) => f ? f : f0\r\n\r\n// Util functions often used in SAM implementations\r\nconst e = value => Array.isArray(value) \r\n    ? value.map(e).reduce(and)\r\n    : value === true || (value !== null && value !== undefined)\r\n\r\nconst i = (value, element) => {\r\n    switch(typeof value) {\r\n        case 'string': return typeof element === 'string' && value.includes(element)\r\n        case 'object': return Array.isArray(value) \r\n            ? value.includes(element)\r\n            : typeof element === 'string' && e(value[element])\r\n    }\r\n    return value === element\r\n}\r\n\r\nconst E = (value, element) => \r\n    e(value) && e(element) \r\n    ? i(value,element)\r\n    : e(value)\r\n\r\nconst oneOf = (value, f) => { \r\n    e(value) && f(value) \r\n    return mon(e(value)) \r\n}\r\n\r\nconst on = (value, f) => { \r\n    e(value) && f(value) \r\n    return { on }\r\n}\r\n\r\nconst mon = (triggered = true) => ({\r\n    oneOf: triggered ? (value, f) => mon() : oneOf\r\n})\r\n\r\nconst first = (arr = []) => arr[0]\r\nconst or = (acc, current) => acc || current\r\nconst and = (acc, current) => acc && current\r\nconst match = (conditions, values) => first(conditions.map((condition, index) => condition ? values[index] : null).filter(e))\r\nconst step = () => ({})\r\n\r\nexport {O, A, S, N, NZ, F, E, on, oneOf, or, and, match, step, first}"],"file":"sam-utils.js"}